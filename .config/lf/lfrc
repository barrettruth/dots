set previewer ~/.config/lf/previewer
set cleaner ~/.config/lf/cleaner

set drawbox
set number
set relativenumber
set hidden true
set shell zsh
set shellopts '-eu'
set ifs "\n"
set noicons
set incsearch
set scrolloff 4
set tabstop 2
set smartcase
set dircounts
set info size
set ratios 1:2:3
set timefmt '2006-01-02 15:04:05 -0700'

cmd open ${{
    setsid -f xdg-open "$f" 2>/dev/null 2>&1 &
}}

cmd sopen ${{
    for f in $fx; do
         setsid -f xdg-open "$f" >/dev/null 2>&1 &
    done
}}
map <c-o> :sopen; quit
map . set hidden!

map ad push $mkdir<space>
map af push $touch<space>
cmd rmd ${{
    set -f
    while IFS= read -r dir; do
        rmdir -v -- "$dir"
    done <<< "$fx"
}}
map xd rmd
cmd rmf ${{
    set -f
    while IFS= read -r file; do
        rm -v -- "$file"
    done <<< "$fx"
}}
map xf rmf
map H jump-prev
map L jump-next

map <c-t> $lf -remote "send $id select $(fzf)"
map zz push :z<space>

cmd resize %{{
    w=$(tmux display-message -p '#{pane_width}' || tput cols)
    if [ $w -le 62 ]; then
        lf -remote "send $id set ratios 1:4"
        lf -remote "send $id set nopreview"
    elif [ $w -le 80 ]; then
        lf -remote "send $id set ratios 1:2:2"
    elif [ $w -le 100 ]; then
        lf -remote "send $id set ratios 1:2:3"
    else
        lf -remote "send $id set ratios 2:4:5"
    fi
}}

cmd on-init %{{
    lf -remote "send $id resize"
}}

# vim: ft=lf sw=4 commentstring=#\ %s
